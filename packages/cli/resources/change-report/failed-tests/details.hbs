{{#if testFailures.length}}
## :warning: Failed tests

  {{#each testFailures}}

<details>
<summary>
{{ testLocation }}
</summary>

<p/>

<!-- testLocation -->
[{{testLocation}}]({{ source_url testLocation }}) failed with error:

{{#if failureMessage}}
<!-- failureMessage -->
```
{{{failureMessage}}}
```
{{/if}}

<!-- failureLocation -->
{{#if failureLocation}}
The error occurred at [{{failureLocation}}]({{ source_url failureLocation }}):
{{/if}}

{{#if testSnippet}}
{{#with testSnippet}}
<!-- testSnippet -->
```{{language}}
{{{codeFragment}}}
```
{{/with}}
{{/if}}

<!-- sourceDiff -->
{{#if appmap.sourceDiff }}
The following code changes may be related to this test failure:

```diff
{{{appmap.sourceDiff}}}
```
{{else}}
No relevant code changes found.
{{/if}}


| Diagram | Link |
| --- | --- |
{{#if appmap.changed}}
| Sequence Diagram Diff | [(diff) {{ appmap.name }}]({{ appmap_diff_url appmap }}) |
{{/if}}
| AppMap | [(appmap) {{ appmap.name }}]({{ appmap_url 'head' appmap }}) |

</details>
  {{/each}}
{{/if}}
