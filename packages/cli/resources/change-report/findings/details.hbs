{{#*inline "finding-stack" }}
{{#with stack }}
  {{#each this }}
    {{#if (source_url this)}}
- [{{this}}]({{ source_url this }})
    {{else}}
- {{ this }}
    {{/if}}
  {{/each}}
{{/with}}

{{/inline}}
{{#*inline "finding"}}

<details>
<summary>
  {{ finding.ruleTitle }}
</summary>


##### Description

> {{ finding.message }}

| Field | Value |
| --- | --- |
| Rule | [{{ finding.ruleId }}](https://appmap.io/docs/analysis/rules-reference.html#{{finding.ruleId }}) |
| Impact domain | {{ finding.impactDomain }} |

##### View in AppMap

- [Full AppMap &raquo;]({{ appmap_url 'head' appmap }})
    {{#if appmap.changed}}
- [Sequence diagram diff &raquo;]({{ appmap_diff_url appmap }})
    {{/if}}

{{#if appmap.sourceDiff}}

##### Related code changes

```diff
{{{ appmap.sourceDiff }}}
```
{{/if}}

##### Stack trace

{{#with finding}}
{{> finding-stack}}
{{/with}}

</details>
{{/inline}}
{{#if (length findingDiff.newFindings findingDiff.resolvedFindings)}}
<h2 id="{{ metadata.anchor }}">{{ metadata.title }}</h2>
  {{#if (length findingDiff.newFindings) }}
### {{metadata.emoji}} New problems detected ({{ length findingDiff.newFindings }})
      {{#each findingDiff.newFindings}}
{{> finding}}
      {{/each}}

  {{/if}}

  {{#if (length findingDiff.resolvedFindings) }}
### :tada: Problems resolved ({{ length findingDiff.resolvedFindings}})

      {{#each findingDiff.resolvedFindings}}
{{> finding}}
      {{/each}}

  {{/if}}

  {{#if findingDiff.pruned}}
Because there are so many new and resolved {{ metadata.name }}, some of them are not listed in this report.
  {{/if}}
{{/if}}
